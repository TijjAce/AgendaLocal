{% extends 'base.html' %}

{% block title %}Carte Simple - Test{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
    #map {
        height: 500px;
        width: 100%;
        border: 2px solid #007bff;
        border-radius: 8px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>üó∫Ô∏è Carte Simple - Test Leaflet</h2>
    <p>Cette carte basique devrait s'afficher sans probl√®me :</p>
    
    <div id="map"></div>
    
    <div class="mt-3">
        <p><strong>Si vous voyez la carte ci-dessus, Leaflet fonctionne !</strong></p>
        <a href="{% url 'friends:dashboard' %}" class="btn btn-primary">Retour Dashboard</a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// Script ultra-simple pour tester Leaflet
document.addEventListener('DOMContentLoaded', function() {
    console.log('Initialisation de la carte simple...');
    
    try {
        // Cr√©er la carte
        var map = L.map('map').setView([46.603354, 1.888334], 6);
        
        // Ajouter les tuiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors'
        }).addTo(map);
        
        // Ajouter un marqueur simple
        L.marker([48.8566, 2.3522]).addTo(map)
            .bindPopup('Paris - Test marker')
            .openPopup();
            
        console.log('Carte initialis√©e avec succ√®s !');
        
    } catch (error) {
        console.error('Erreur lors de l\'initialisation de la carte:', error);
        document.getElementById('map').innerHTML = '<div class="alert alert-danger">Erreur: ' + error.message + '</div>';
    }
});
</script>
{% endblock %}
